<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="SVWB記録">
    <link rel="apple-touch-icon" href="icon-192x192.png">

    <title>SVWB戦績記録</title>
    
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
</head>
<body>

    <div class="container">
        <div id="authSection" style="display:none;">
            <h1>SVWB戦績記録</h1>
            <p>アクセスするには認証が必要です。</p>
            <div class="form-group">
                <label for="secretKey">合言葉:</label>
                <input type="password" id="secretKey" placeholder="共有された合言葉を入力">
            </div>
            <div id="g_id_onload"
                 data-client_id="__GOOGLE_CLIENT_ID__"
                 data-callback="handleCredentialResponse">
            </div>
            <div class="g_id_signin" data-type="standard" data-size="large" data-theme="outline" data-text="sign_in_with" data-shape="rectangular" data-logo_alignment="left"></div>
        </div>

        <div id="mainContent" style="display:none;">
            <header class="app-header">
                <p id="userInfo" style="margin: 0;"></p>
                <button id="signOutButton">認証情報クリア</button>
            </header>

            <div id="draftSection" style="display:none;">
                <p style="margin: 0;"><strong>保存された下書きを自動復元しました。</strong></p>
                <button type="button" id="clearDraftButton">下書きを削除</button>
            </div>
            
            <form id="recordForm">
                <div class="form-layout">
                    <div class="form-column">
                        <div class="form-group">
                            <label for="playerName">プレイヤー名:</label>
                            <select id="playerName" required></select>
                        </div>
                        <div class="form-group">
                            <label for="myDeck">自分のデッキ:</label>
                            <select id="myDeck" required></select>
                        </div>
                        <div class="form-group">
                            <label for="opponentDeck">相手のデッキ:</label>
                            <select id="opponentDeck" required></select>
                        </div>
                        <div class="form-group">
                            <label for="opponentRank">相手グループ:</label>
                            <select id="opponentRank"></select>
                        </div>
                    </div>
                    <div class="form-column">
                        <div class="form-group">
                            <label for="turn">先攻/後攻:</label>
                            <select id="turn" required></select>
                        </div>
                        <div class="form-group">
                            <label for="winLoss">勝敗:</label>
                            <select id="winLoss" required></select>
                        </div>
                        <div class="form-group" style="flex-grow: 1;">
                            <label for="remarks">備考:</label>
                            <textarea id="remarks"></textarea>
                        </div>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="button" id="draftButton">下書きとして保存</button>
                    <button type="button" id="submitButton">記録する</button>
                </div>
            </form>
            <p id="status"></p>
        </div>
    </div>
    
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-messaging.js"></script>
    
    <script src="script.js" defer></script>
    <script src="https://accounts.google.com/gsi/client" defer></script>
</body>
</html>